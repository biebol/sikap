--
-- Script was generated by Devart dbForge Studio 2022 for MySQL, Version 9.1.8.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 5/8/2023 4:20:36 PM
-- Server version: 10.4.24
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

DROP DATABASE IF EXISTS wpu_login;

CREATE DATABASE IF NOT EXISTS wpu_login
CHARACTER SET utf8mb4
COLLATE utf8mb4_general_ci;

--
-- Set default database
--
USE wpu_login;

--
-- Create table `wpu_login`.`user`
--
CREATE TABLE IF NOT EXISTS wpu_login.user (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(128) NOT NULL,
  email varchar(128) NOT NULL,
  image varchar(128) NOT NULL,
  password varchar(256) NOT NULL,
  role_id int(11) NOT NULL,
  is_active int(1) NOT NULL,
  date_created int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 21,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`usulkp`
--
CREATE TABLE IF NOT EXISTS wpu_login.usulkp (
  usulkp_id int(11) NOT NULL AUTO_INCREMENT,
  user_id int(11),
  KepPangkatTerakhir varchar(255),
  KepJabatanTerakhir varchar(255),
  IjazahDikumti varchar(255),
  IjazahUjianDinas varchar(255),
  Algol varchar(255),
  SKP2ThnTerakhir varchar(255),
  PRIMARY KEY (usulkp_id)
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci;

--
-- Create foreign key
--
ALTER TABLE wpu_login.usulkp
ADD CONSTRAINT usulkp_ibfk_1 FOREIGN KEY (user_id)
REFERENCES wpu_login.user (id);

--
-- Create table `wpu_login`.`user_token`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_token (
  id int(11) NOT NULL AUTO_INCREMENT,
  email varchar(128) NOT NULL,
  token varchar(128) NOT NULL,
  date_created int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_sub_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_sub_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  menu_id int(11) NOT NULL,
  title varchar(128) NOT NULL,
  url varchar(128) NOT NULL,
  icon varchar(128) NOT NULL,
  is_active int(1) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 1820,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_role`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_role (
  id int(11) NOT NULL AUTO_INCREMENT,
  role varchar(128) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  menu varchar(128) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_access_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_access_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  role_id int(11) NOT NULL,
  menu_id int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 10,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`pangkat`
--
CREATE TABLE IF NOT EXISTS wpu_login.pangkat (
  pangkat_id int(11) NOT NULL AUTO_INCREMENT,
  nama_pangkat varchar(255),
  singkatan varchar(255),
  created_at timestamp NOT NULL,
  updated_at timestamp NOT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (pangkat_id)
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci;

CREATE USER IF NOT EXISTS 'pma'@'localhost' IDENTIFIED WITH mysql_native_password;
GRANT SELECT, INSERT, UPDATE, DELETE ON phpmyadmin.* TO 'pma'@'localhost';



CREATE USER IF NOT EXISTS 'root'@'127.0.0.1' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'127.0.0.1'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'127.0.0.1';



CREATE USER IF NOT EXISTS 'root'@'::1' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'::1'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'::1';



CREATE USER IF NOT EXISTS 'root'@'localhost' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'localhost'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost';
GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION;



-- 
-- Dumping data for table wpu_login.user
--
/*!40000 ALTER TABLE wpu_login.user DISABLE KEYS */;
LOCK TABLES wpu_login.user WRITE;
INSERT INTO wpu_login.user(id, name, email, image, password, role_id, is_active, date_created) VALUES
(12, 'Bina Sungkawaman', 'binabiebol@gmail.com', 'default.jpg', '$2y$10$.r337iP4QkDRew6RFBPmy.l0bfRGYi.t2PHdbyauOzeXUIv6NR6Bi', 1, 1, 1683247519),
(15, 'Afshah', 'afshahkuaja@gmail.com', 'default.jpg', '$2y$10$IJ9eIW7CGhzo5W86.Od61eXJrUZU5PLov.r4lVrIk06jfEiX2qL0a', 2, 1, 1683250349),
(18, 'test', 'test@gmail.com', 'default.jpg', '$2y$10$EHYRMBKZWsSb2wN82UW1auWbg66qsiq/.Lq7Cv.o9DxRhUE5tSJvG', 2, 1, 1683265845),
(19, 'budi perkerti', 'bernat@gmail.com', 'default.jpg', '$2y$10$7G97bhWd8DLihlgQlTQpHehk2w7SoWK8ZQgJFtIIzhJIorSUOkiCu', 2, 1, 1683265884),
(20, 'test', 'udin@gmail.com', 'default.jpg', '$2y$10$pOjSMwPW5nSL.61xc1Jyd.Z0Cx2oEG9vr59WTayX/fjMtXWiRMSYa', 2, 1, 1683270700);
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.usulkp
--
-- Table wpu_login.usulkp does not contain any data (it is empty)

-- 
-- Dumping data for table wpu_login.user_token
--
/*!40000 ALTER TABLE wpu_login.user_token DISABLE KEYS */;
LOCK TABLES wpu_login.user_token WRITE;
INSERT INTO wpu_login.user_token(id, email, token, date_created) VALUES
(9, 'binabiebol@gmail.com', 'txQs/IK2hPGALnO8XCnIrbJX4g0iL+FcOZrrG4Q+YEA=', 1683247519),
(11, 'afshahku@gmail.com', 'o0lof1QpmEqiy6ZXCKiaIrPlFz2GMyuzkIm/4HxDCVU=', 1683250265);
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user_token ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_sub_menu
--
/*!40000 ALTER TABLE wpu_login.user_sub_menu DISABLE KEYS */;
LOCK TABLES wpu_login.user_sub_menu WRITE;
INSERT INTO wpu_login.user_sub_menu(id, menu_id, title, url, icon, is_active) VALUES
(1, 1, 'Dashboard', 'admin', 'fas fa-fw fa-tachometer-alt', 1),
(2, 2, 'My Profile', 'user', 'fas fa-fw fa-user', 1),
(3, 2, 'Edit Profile', 'user/edit', 'fas fa-fw fa-user-edit', 1),
(4, 3, 'Menu Management', 'menu', 'fas fa-fw fa-folder', 1),
(5, 3, 'Submenu Management', 'menu/submenu', 'fas fa-fw fa-folder-open', 1),
(7, 1, 'Role', 'admin/role', 'fas fa-fw fa-user-tie', 1),
(8, 2, 'Change Password', 'user/changepassword', 'fas fa-fw fa-key', 1),
(9, 2, 'Usulan KP', 'user/usulkp_form', 'fas fa-fw fa-user', 1),
(10, 2, 'Pangkat', 'user/pangkat', 'fas fa-fw fa-user', 1);
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user_sub_menu ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_role
--
/*!40000 ALTER TABLE wpu_login.user_role DISABLE KEYS */;
LOCK TABLES wpu_login.user_role WRITE;
INSERT INTO wpu_login.user_role(id, role) VALUES
(1, 'Administrator'),
(2, 'Member');
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user_role ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_menu
--
/*!40000 ALTER TABLE wpu_login.user_menu DISABLE KEYS */;
LOCK TABLES wpu_login.user_menu WRITE;
INSERT INTO wpu_login.user_menu(id, menu) VALUES
(1, 'Admin'),
(2, 'User'),
(3, 'Menu');
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user_menu ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_access_menu
--
/*!40000 ALTER TABLE wpu_login.user_access_menu DISABLE KEYS */;
LOCK TABLES wpu_login.user_access_menu WRITE;
INSERT INTO wpu_login.user_access_menu(id, role_id, menu_id) VALUES
(1, 1, 1),
(3, 2, 2),
(7, 1, 3),
(8, 1, 2);
UNLOCK TABLES;
/*!40000 ALTER TABLE wpu_login.user_access_menu ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.pangkat
--
-- Table wpu_login.pangkat does not contain any data (it is empty)

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;