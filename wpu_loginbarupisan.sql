--
-- Script was generated by Devart dbForge Studio 2022 for MySQL, Version 9.1.8.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 5/13/2023 6:19:49 PM
-- Server version: 10.4.24
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

DROP DATABASE IF EXISTS wpu_login;

CREATE DATABASE IF NOT EXISTS wpu_login
CHARACTER SET utf8mb4
COLLATE utf8mb4_general_ci;

--
-- Set default database
--
USE wpu_login;

--
-- Create table `wpu_login`.`pangkat`
--
CREATE TABLE IF NOT EXISTS wpu_login.pangkat (
  pangkat_id int(11) NOT NULL AUTO_INCREMENT,
  nama_pangkat varchar(255),
  singkatan varchar(255),
  created_at timestamp NOT NULL ON UPDATE CURRENT_TIMESTAMP,
  updated_at timestamp NOT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (pangkat_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 1489,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci;

--
-- Create table `wpu_login`.`user`
--
CREATE TABLE IF NOT EXISTS wpu_login.user (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(128) NOT NULL,
  email varchar(128) NOT NULL,
  image varchar(128) NOT NULL,
  password varchar(256) NOT NULL,
  role_id int(11) NOT NULL,
  is_active int(1) NOT NULL,
  date_created int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 21,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`kp_t`
--
CREATE TABLE IF NOT EXISTS wpu_login.kp_t (
  kp_id int(11) NOT NULL AUTO_INCREMENT,
  nip varchar(255) NOT NULL,
  nama varchar(255) NOT NULL,
  user_id int(11),
  jabatan varchar(255) NOT NULL,
  pangkat_lama_id int(11) NOT NULL,
  pangkat_baru_id int(11) NOT NULL,
  jenis_kenaikan varchar(255) NOT NULL,
  created_at datetime,
  PRIMARY KEY (kp_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci;

--
-- Create foreign key
--
ALTER TABLE wpu_login.kp_t
ADD CONSTRAINT fk_kp_t_user_id FOREIGN KEY (user_id)
REFERENCES wpu_login.user (id);

--
-- Create foreign key
--
ALTER TABLE wpu_login.kp_t
ADD CONSTRAINT kp_t_ibfk_1 FOREIGN KEY (pangkat_lama_id)
REFERENCES wpu_login.pangkat (pangkat_id);

--
-- Create foreign key
--
ALTER TABLE wpu_login.kp_t
ADD CONSTRAINT kp_t_ibfk_2 FOREIGN KEY (pangkat_baru_id)
REFERENCES wpu_login.pangkat (pangkat_id);

--
-- Create foreign key
--
ALTER TABLE wpu_login.kp_t
ADD CONSTRAINT kp_t_ibfk_3 FOREIGN KEY (user_id)
REFERENCES wpu_login.user (id);

--
-- Create table `wpu_login`.`usulkp`
--
CREATE TABLE IF NOT EXISTS wpu_login.usulkp (
  usulkp_id int(11) NOT NULL AUTO_INCREMENT,
  user_id int(11),
  KepPangkatTerakhir varchar(255),
  KepJabatanTerakhir varchar(255),
  IjazahDikumti varchar(255),
  IjazahUjianDinas varchar(255),
  Algol varchar(255),
  SKP2ThnTerakhir varchar(255),
  kp_id int(11),
  PAK varchar(255),
  IjasahPim varchar(255),
  PRIMARY KEY (usulkp_id)
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci;

--
-- Create foreign key
--
ALTER TABLE wpu_login.usulkp
ADD CONSTRAINT fk_usulkp_kp_t FOREIGN KEY (kp_id)
REFERENCES wpu_login.kp_t (kp_id);

--
-- Create foreign key
--
ALTER TABLE wpu_login.usulkp
ADD CONSTRAINT usulkp_ibfk_1 FOREIGN KEY (user_id)
REFERENCES wpu_login.user (id);

--
-- Create table `wpu_login`.`user_token`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_token (
  id int(11) NOT NULL AUTO_INCREMENT,
  email varchar(128) NOT NULL,
  token varchar(128) NOT NULL,
  date_created int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_sub_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_sub_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  menu_id int(11) NOT NULL,
  title varchar(128) NOT NULL,
  url varchar(128) NOT NULL,
  icon varchar(128) NOT NULL,
  is_active int(1) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 1820,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_role`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_role (
  id int(11) NOT NULL AUTO_INCREMENT,
  role varchar(128) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  menu varchar(128) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `wpu_login`.`user_access_menu`
--
CREATE TABLE IF NOT EXISTS wpu_login.user_access_menu (
  id int(11) NOT NULL AUTO_INCREMENT,
  role_id int(11) NOT NULL,
  menu_id int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 10,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

CREATE USER IF NOT EXISTS 'pma'@'localhost' IDENTIFIED WITH mysql_native_password;
GRANT SELECT, INSERT, UPDATE, DELETE ON phpmyadmin.* TO 'pma'@'localhost';



CREATE USER IF NOT EXISTS 'root'@'127.0.0.1' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'127.0.0.1'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'127.0.0.1';



CREATE USER IF NOT EXISTS 'root'@'::1' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'::1'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'::1';



CREATE USER IF NOT EXISTS 'root'@'localhost' IDENTIFIED WITH mysql_native_password;
GRANT USAGE ON *.* TO 'root'@'localhost'
WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost';
GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION;
GRANT PROXY ON ''@'%' TO 'root'@'localhost' WITH GRANT OPTION;



-- 
-- Dumping data for table wpu_login.pangkat
--
/*!40000 ALTER TABLE wpu_login.pangkat DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.pangkat(pangkat_id, nama_pangkat, singkatan, created_at, updated_at) VALUES
(1, 'Juru Muda I/a', 'JM', '2023-05-08 16:44:43', '2023-05-08 16:44:43'),
(2, 'Juru Muda I/a', 'JM', '2023-05-08 16:44:50', '2023-05-08 16:44:50'),
(3, 'Juru Muda I/a', 'JM', '2023-05-08 12:33:57', '2023-05-08 17:33:57'),
(4, 'Juru Muda I/a', 'JM', '2023-05-08 12:35:21', '2023-05-08 17:35:21'),
(5, 'Juru Muda I/a', 'JM', '2023-05-08 12:50:08', '2023-05-08 17:50:08'),
(6, 'Juru Muda I/a', 'JMa', '2023-05-08 12:50:12', '2023-05-08 17:50:12'),
(7, 'Pengatur Muda II/a', 'PM', '2023-05-08 13:29:29', '2023-05-08 18:29:29'),
(8, 'Penata Muda III/a', 'PM III', '2023-05-08 13:46:06', '2023-05-08 18:46:06'),
(9, 'Penata Muda Tk.I III/b', 'PM Tk III', '2023-05-08 13:50:01', '2023-05-08 18:50:01'),
(10, 'Penata III/c', 'P III', '2023-05-08 13:50:23', '2023-05-08 18:50:23'),
(11, 'IT Supervisor', 'IT SPV', '2023-05-08 13:50:58', '2023-05-08 18:50:58');
COMMIT;
/*!40000 ALTER TABLE wpu_login.pangkat ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user
--
/*!40000 ALTER TABLE wpu_login.user DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user(id, name, email, image, password, role_id, is_active, date_created) VALUES
(12, 'Bina Sungkawaman', 'binabiebol@gmail.com', 'default.jpg', '$2y$10$.r337iP4QkDRew6RFBPmy.l0bfRGYi.t2PHdbyauOzeXUIv6NR6Bi', 1, 1, 1683247519),
(15, 'Afshah', 'afshahkuaja@gmail.com', 'default.jpg', '$2y$10$IJ9eIW7CGhzo5W86.Od61eXJrUZU5PLov.r4lVrIk06jfEiX2qL0a', 2, 1, 1683250349),
(18, 'test', 'test@gmail.com', 'default.jpg', '$2y$10$EHYRMBKZWsSb2wN82UW1auWbg66qsiq/.Lq7Cv.o9DxRhUE5tSJvG', 2, 1, 1683265845),
(19, 'budi perkerti', 'bernat@gmail.com', 'default.jpg', '$2y$10$7G97bhWd8DLihlgQlTQpHehk2w7SoWK8ZQgJFtIIzhJIorSUOkiCu', 2, 1, 1683265884),
(20, 'udin', 'udin@gmail.com', 'FOTO_GARRY_AFRIALDY.jpg', '$2y$10$pOjSMwPW5nSL.61xc1Jyd.Z0Cx2oEG9vr59WTayX/fjMtXWiRMSYa', 1, 1, 1683270700);
COMMIT;
/*!40000 ALTER TABLE wpu_login.user ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.kp_t
--
/*!40000 ALTER TABLE wpu_login.kp_t DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.kp_t(kp_id, nip, nama, user_id, jabatan, pangkat_lama_id, pangkat_baru_id, jenis_kenaikan, created_at) VALUES
(1, '17284505', 'Dinda', 20, 'Pengola acara', 5, 11, 'Fungsional', '2023-05-13 10:20:47');
COMMIT;
/*!40000 ALTER TABLE wpu_login.kp_t ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.usulkp
--
-- Table wpu_login.usulkp does not contain any data (it is empty)

-- 
-- Dumping data for table wpu_login.user_token
--
/*!40000 ALTER TABLE wpu_login.user_token DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user_token(id, email, token, date_created) VALUES
(9, 'binabiebol@gmail.com', 'txQs/IK2hPGALnO8XCnIrbJX4g0iL+FcOZrrG4Q+YEA=', 1683247519),
(11, 'afshahku@gmail.com', 'o0lof1QpmEqiy6ZXCKiaIrPlFz2GMyuzkIm/4HxDCVU=', 1683250265);
COMMIT;
/*!40000 ALTER TABLE wpu_login.user_token ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_sub_menu
--
/*!40000 ALTER TABLE wpu_login.user_sub_menu DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user_sub_menu(id, menu_id, title, url, icon, is_active) VALUES
(1, 1, 'Dashboard', 'admin', 'fas fa-fw fa-tachometer-alt', 1),
(2, 2, 'My Profile', 'user', 'fas fa-fw fa-user', 1),
(3, 2, 'Edit Profile', 'user/edit', 'fas fa-fw fa-user-edit', 1),
(4, 3, 'Menu Management', 'menu', 'fas fa-fw fa-folder', 1),
(5, 3, 'Submenu Management', 'menu/submenu', 'fas fa-fw fa-folder-open', 1),
(7, 1, 'Role', 'admin/role', 'fas fa-fw fa-user-tie', 1),
(8, 2, 'Change Password', 'user/changepassword', 'fas fa-fw fa-key', 1),
(9, 2, 'Usulan KP', 'user/usulkp_form', 'fas fa-fw fa-user', 1),
(10, 1, 'Pangkat', 'admin/pangkat', 'fas fa-fw fa-user', 1);
COMMIT;
/*!40000 ALTER TABLE wpu_login.user_sub_menu ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_role
--
/*!40000 ALTER TABLE wpu_login.user_role DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user_role(id, role) VALUES
(1, 'Administrator'),
(2, 'Member');
COMMIT;
/*!40000 ALTER TABLE wpu_login.user_role ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_menu
--
/*!40000 ALTER TABLE wpu_login.user_menu DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user_menu(id, menu) VALUES
(1, 'Admin'),
(2, 'User'),
(3, 'Menu');
COMMIT;
/*!40000 ALTER TABLE wpu_login.user_menu ENABLE KEYS */;

-- 
-- Dumping data for table wpu_login.user_access_menu
--
/*!40000 ALTER TABLE wpu_login.user_access_menu DISABLE KEYS */;
BEGIN;
INSERT INTO wpu_login.user_access_menu(id, role_id, menu_id) VALUES
(1, 1, 1),
(3, 2, 2),
(7, 1, 3),
(8, 1, 2);
COMMIT;
/*!40000 ALTER TABLE wpu_login.user_access_menu ENABLE KEYS */;

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;